<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Wave View | Android курс в Технополисе 2019</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Wave View" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/05_custom_view_animations_touches/052_wave_view/" />
<meta property="og:url" content="http://localhost:4000/05_custom_view_animations_touches/052_wave_view/" />
<meta property="og:site_name" content="Android курс в Технополисе 2019" />
<script type="application/ld+json">
{"url":"http://localhost:4000/05_custom_view_animations_touches/052_wave_view/","headline":"Wave View","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=d3418c91688b3f949df607a428f4549250f0b594">
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">Android курс в Технополисе 2019</a></h1>
      

      <p>В этом уроке мы рассмотрим как создать свой <code class="highlighter-rouge">View</code> на примере аудиосообщения.</p>

<h2 id="wave-view">Wave View</h2>

<p>Предположим, что во время разработки приложения нам понадобилось отобразить аудиосообщение. Как же отобразить кнопки и прочие элементы мы уже знаем, но как отрисовать столбики громкости?</p>

<p><img src="img/audiomessage.png" width="600" /></p>

<p>Для этого нам понадобиться создать собственное <code class="highlighter-rouge">View</code>. Для этого унаследуемся от базового класса <code class="highlighter-rouge">View</code> и определим конструкторы:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WaveView</span> <span class="kd">extends</span> <span class="n">View</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="nf">WaveView</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nf">WaveView</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="n">AttributeSet</span> <span class="n">attrs</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">attrs</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>и добавим полученный <code class="highlighter-rouge">WaveView</code> в разметку активити:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">&lt;</span><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;android.support.constraint.ConstraintLayout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span>
    <span class="na">xmlns:tools=</span><span class="s">"http://schemas.android.com/tools"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
    <span class="na">tools:context=</span><span class="s">".MainActivity"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;ru.ok.technopolis.customview.WaveView</span>
        <span class="na">android:layout_width=</span><span class="s">"200dp"</span>
        <span class="na">android:layout_height=</span><span class="s">"100dp"</span>
        <span class="na">android:background=</span><span class="s">"#ddf3c2"</span>
        <span class="na">app:layout_constraintBottom_toBottomOf=</span><span class="s">"parent"</span>
        <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">"parent"</span>
        <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">"parent"</span>
        <span class="na">app:layout_constraintTop_toTopOf=</span><span class="s">"parent"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/android.support.constraint.ConstraintLayout&gt;</span>
</code></pre></div></div>

<p>Запустив проект мы ничего не увидим кроме зеленого прямоугольника (мы задали зеленый фон для <code class="highlighter-rouge">View</code>). Размеры прямоугольника равны значениям выставленным в <code class="highlighter-rouge">layout_width</code> и <code class="highlighter-rouge">layout_height</code>.</p>

<p><img src="img/empty_wave.png" width="400px" /></p>

<p>Для начала подготовим входные данные. Пускай у нас есть некий источник массива с данными о громкости аудиосообщения <code class="highlighter-rouge">WaveRepository</code>. Метод <code class="highlighter-rouge">getWaveData</code> возвращает массив, где каждый элемент описывает громкость аудисоообщения в заданный промежуток времени.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WaveRepository</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">MAX_VOLUME</span> <span class="o">=</span> <span class="mi">100</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">WAVE_LENGTH</span> <span class="o">=</span> <span class="mi">200</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="nf">getWaveData</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">WAVE_LENGTH</span><span class="o">];</span>
        <span class="n">Random</span> <span class="n">r</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">data</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="n">MAX_VOLUME</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
            <span class="n">data</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">data</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h2 id="onmeasure">onMeasure</h2>

<p>Для того, что бы Android смог отрисовать наш <code class="highlighter-rouge">WaveView</code>, его нужно измерить. Определим толщину линии каждого столбика громкости, для этого в файл <code class="highlighter-rouge">dimens.xml</code> внесем соответствующее значение. Важно помнить, что задаем размеры в<code class="highlighter-rouge">dp</code> а не в <code class="highlighter-rouge">px</code>!</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;resources&gt;</span>
    <span class="nt">&lt;dimen</span> <span class="na">name=</span><span class="s">"wave_view_item_width"</span><span class="nt">&gt;</span>2dp<span class="nt">&lt;/dimen&gt;</span>
<span class="nt">&lt;/resources&gt;</span>
</code></pre></div></div>

<p>и считаем это значение в конструкторе <code class="highlighter-rouge">View</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">itemWidth</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">getResources</span><span class="o">().</span><span class="na">getDimension</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">dimen</span><span class="o">.</span><span class="na">wave_view_item_width</span><span class="o">);</span>
</code></pre></div></div>

<p>Приступаем непосредственно к расчету размеров <code class="highlighter-rouge">View</code>, переопределяем метод</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onMeasure</span><span class="o">(</span><span class="kt">int</span> <span class="n">widthMeasureSpec</span><span class="o">,</span> <span class="kt">int</span> <span class="n">heightMeasureSpec</span><span class="o">)</span>
</code></pre></div></div>

<p>Первым шагом узнаем какие требования предъявляет родитель к нашему <code class="highlighter-rouge">View</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">measuredWidth</span> <span class="o">=</span> <span class="n">MeasureSpec</span><span class="o">.</span><span class="na">getSize</span><span class="o">(</span><span class="n">widthMeasureSpec</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">widthMode</span> <span class="o">=</span> <span class="n">MeasureSpec</span><span class="o">.</span><span class="na">getMode</span><span class="o">(</span><span class="n">widthMeasureSpec</span><span class="o">);</span>

<span class="kt">int</span> <span class="n">measuredHeight</span> <span class="o">=</span> <span class="n">MeasureSpec</span><span class="o">.</span><span class="na">getSize</span><span class="o">(</span><span class="n">heightMeasureSpec</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">heightMode</span> <span class="o">=</span> <span class="n">MeasureSpec</span><span class="o">.</span><span class="na">getMode</span><span class="o">(</span><span class="n">heightMeasureSpec</span><span class="o">);</span>
</code></pre></div></div>

<p>Далее нам необходимо посчитать желаемый размер <code class="highlighter-rouge">WaveView</code>. Будем рисовать каждый столбик размером с <code class="highlighter-rouge">itemWidth</code> и между столбиками сделаем интервал в <code class="highlighter-rouge">itemWidth</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">width</span> <span class="o">=</span> <span class="n">originalData</span><span class="o">.</span><span class="na">length</span> <span class="o">*</span> <span class="n">itemWidth</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">itemWidth</span><span class="o">;</span>
</code></pre></div></div>

<p>Из предыдущего урока мы знаем, что родитель может запросить размер меньший чем мы планирум и мы не имеем права отказать. В этом случае необходимо интерполировать входные данные с громкостью. Для интерполяции будем использовать класс с простейшей  интерполяцией <a href="https://github.com/ajbanks/arff-builder/blob/3fc8f6860a37d33cd93081a9c8c0025fd70872f5/src/stretching/LinearInterpolation.java">LinearInterpolation</a>.
Высоту <code class="highlighter-rouge">View</code> мы всегда хотим использовать ту, которую предоставит родитель.</p>

<p>Код для расчета ширины:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">width</span> <span class="o">=</span> <span class="n">originalData</span><span class="o">.</span><span class="na">length</span> <span class="o">*</span> <span class="n">itemWidth</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">itemWidth</span><span class="o">;</span>
<span class="k">switch</span> <span class="o">(</span><span class="n">widthMode</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="n">View</span><span class="o">.</span><span class="na">MeasureSpec</span><span class="o">.</span><span class="na">EXACTLY</span><span class="o">:</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">width</span> <span class="o">&gt;</span> <span class="n">measuredWidth</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">itemCount</span> <span class="o">=</span> <span class="o">(</span><span class="n">measuredWidth</span> <span class="o">+</span> <span class="n">itemWidth</span><span class="o">)</span> <span class="o">/</span> <span class="o">(</span><span class="n">itemWidth</span> <span class="o">*</span> <span class="mi">2</span><span class="o">);</span>
            <span class="n">measuredData</span> <span class="o">=</span> <span class="n">LinearInterpolation</span><span class="o">.</span><span class="na">interpolateArray</span><span class="o">(</span><span class="n">originalData</span><span class="o">,</span> <span class="n">itemCount</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">measuredData</span> <span class="o">=</span> <span class="n">originalData</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">measuredWidth</span><span class="o">;</span>
        <span class="k">break</span><span class="o">;</span>
    <span class="k">case</span> <span class="n">View</span><span class="o">.</span><span class="na">MeasureSpec</span><span class="o">.</span><span class="na">AT_MOST</span><span class="o">:</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">width</span> <span class="o">&gt;</span> <span class="n">measuredWidth</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">itemCount</span> <span class="o">=</span> <span class="o">(</span><span class="n">measuredWidth</span> <span class="o">+</span> <span class="n">itemWidth</span><span class="o">)</span> <span class="o">/</span> <span class="o">(</span><span class="n">itemWidth</span> <span class="o">*</span> <span class="mi">2</span><span class="o">);</span>
            <span class="n">measuredData</span> <span class="o">=</span> <span class="n">LinearInterpolation</span><span class="o">.</span><span class="na">interpolateArray</span><span class="o">(</span><span class="n">originalData</span><span class="o">,</span> <span class="n">itemCount</span><span class="o">);</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">measuredWidth</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">measuredData</span> <span class="o">=</span> <span class="n">originalData</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">break</span><span class="o">;</span>
    <span class="k">case</span> <span class="n">View</span><span class="o">.</span><span class="na">MeasureSpec</span><span class="o">.</span><span class="na">UNSPECIFIED</span><span class="o">:</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">measuredWidth</span><span class="o">;</span>
        <span class="n">measuredData</span> <span class="o">=</span> <span class="n">originalData</span><span class="o">;</span>
        <span class="k">break</span><span class="o">;</span>
<span class="o">}</span>
<span class="kt">int</span> <span class="n">height</span> <span class="o">=</span> <span class="n">MeasureSpec</span><span class="o">.</span><span class="na">getSize</span><span class="o">(</span><span class="n">heightMeasureSpec</span><span class="o">);</span>
</code></pre></div></div>

<p>И в конце не забываем установить рассчитанные размеры</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">setMeasuredDimension</span><span class="o">(</span><span class="n">width</span><span class="o">,</span> <span class="n">height</span><span class="o">);</span>
</code></pre></div></div>

<p>Запустив написанный код, мы по прежнему увидим зеленый прямоугольник по центру экрана.</p>

<h2 id="ondraw">onDraw</h2>

<p>В методе onDraw нужно выполнить отрисовку нашего элемента. То, на чем мы рисуем - это <code class="highlighter-rouge">Canvas</code>, а то, чем рисуем - это <code class="highlighter-rouge">Paint</code>. <code class="highlighter-rouge">Canvas</code> является аргументом метода <code class="highlighter-rouge">onDraw</code>, а <code class="highlighter-rouge">Paint</code> необходимо создать и настроить. Помним о том, что лучше не создавать никаких объектов во время отрисовки, и создаем <code class="highlighter-rouge">Paint</code> в конструкторе:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">linePaint</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Paint</span><span class="o">();</span>
<span class="n">linePaint</span><span class="o">.</span><span class="na">setStyle</span><span class="o">(</span><span class="n">Paint</span><span class="o">.</span><span class="na">Style</span><span class="o">.</span><span class="na">STROKE</span><span class="o">);</span>
<span class="n">linePaint</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">);</span>
<span class="n">linePaint</span><span class="o">.</span><span class="na">setStrokeWidth</span><span class="o">(</span><span class="n">itemWidth</span><span class="o">);</span>
</code></pre></div></div>

<p>Рисовать будем используя класс <code class="highlighter-rouge">Path</code>, который позволяет задавать произвольную форму графического объекта. <code class="highlighter-rouge">Path</code> также нужно создать в конструкторе:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Path</span> <span class="n">wavePath</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Path</span><span class="o">();</span>
</code></pre></div></div>

<p>И напишем сам код отрисовки:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onDraw</span><span class="o">(</span><span class="n">Canvas</span> <span class="n">canvas</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">measuredData</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="n">wavePath</span><span class="o">.</span><span class="na">reset</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">currentX</span> <span class="o">=</span> <span class="n">itemWidth</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">data</span> <span class="o">:</span> <span class="n">measuredData</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">float</span> <span class="n">height</span> <span class="o">=</span> <span class="o">((</span><span class="kt">float</span><span class="o">)</span> <span class="n">data</span> <span class="o">/</span> <span class="n">WaveRepository</span><span class="o">.</span><span class="na">MAX_VOLUME</span><span class="o">)</span> <span class="o">*</span> <span class="n">getMeasuredHeight</span><span class="o">();</span>
        <span class="n">wavePath</span><span class="o">.</span><span class="na">moveTo</span><span class="o">(</span><span class="n">currentX</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
        <span class="n">wavePath</span><span class="o">.</span><span class="na">lineTo</span><span class="o">(</span><span class="n">currentX</span><span class="o">,</span> <span class="n">height</span><span class="o">);</span>
        <span class="n">currentX</span> <span class="o">+=</span> <span class="n">itemWidth</span> <span class="o">*</span> <span class="mi">2</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="n">canvas</span><span class="o">.</span><span class="na">drawPath</span><span class="o">(</span><span class="n">wavePath</span><span class="o">,</span> <span class="n">linePaint</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Запустив приложение мы увидим что-то похожее на желаемые столбики громкости.</p>

<p><img src="img/wave_simple.png" width="400px" /></p>

<p>Столбцы идут сверху вниз. Это связано с тем, что в интерфейсе Android точкой отчета является верхний левый угол. Сдвинем полоски на центр:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onDraw</span><span class="o">(</span><span class="n">Canvas</span> <span class="n">canvas</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">measuredData</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="n">wavePath</span><span class="o">.</span><span class="na">reset</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">measuredHeight</span> <span class="o">=</span> <span class="n">getMeasuredHeight</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">currentX</span> <span class="o">=</span> <span class="n">itemWidth</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">data</span> <span class="o">:</span> <span class="n">measuredData</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">float</span> <span class="n">height</span> <span class="o">=</span> <span class="o">((</span><span class="kt">float</span><span class="o">)</span> <span class="n">data</span> <span class="o">/</span> <span class="n">WaveRepository</span><span class="o">.</span><span class="na">MAX_VOLUME</span><span class="o">)</span> <span class="o">*</span> <span class="n">measuredHeight</span><span class="o">;</span>
        <span class="kt">float</span> <span class="n">startY</span> <span class="o">=</span> <span class="o">(</span><span class="kt">float</span><span class="o">)</span> <span class="n">measuredHeight</span> <span class="o">/</span> <span class="mi">2</span><span class="n">f</span> <span class="o">-</span> <span class="n">height</span> <span class="o">/</span> <span class="mi">2</span><span class="n">f</span><span class="o">;</span>
        <span class="kt">float</span> <span class="n">endY</span> <span class="o">=</span> <span class="n">startY</span> <span class="o">+</span> <span class="n">height</span><span class="o">;</span>
        <span class="n">wavePath</span><span class="o">.</span><span class="na">moveTo</span><span class="o">(</span><span class="n">currentX</span><span class="o">,</span> <span class="n">startY</span><span class="o">);</span>
        <span class="n">wavePath</span><span class="o">.</span><span class="na">lineTo</span><span class="o">(</span><span class="n">currentX</span><span class="o">,</span> <span class="n">endY</span><span class="o">);</span>
        <span class="n">currentX</span> <span class="o">+=</span> <span class="n">itemWidth</span> <span class="o">*</span> <span class="mi">2</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="n">canvas</span><span class="o">.</span><span class="na">drawPath</span><span class="o">(</span><span class="n">wavePath</span><span class="o">,</span> <span class="n">linePaint</span><span class="o">);</span>
</code></pre></div></div>

<p><img src="img/wave_center.png" width="400px" /></p>

<p>Посмотрим как будет выглядеть <code class="highlighter-rouge">WaveView</code> при разных значения ширины и высоты:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;android.support.constraint.ConstraintLayout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span>
    <span class="na">xmlns:tools=</span><span class="s">"http://schemas.android.com/tools"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
    <span class="na">tools:context=</span><span class="s">".MainActivity"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;ru.ok.technopolis.customview.WaveView</span>
        <span class="na">android:id=</span><span class="s">"@+id/activity_main__wv_1"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"100dp"</span>
        <span class="na">android:background=</span><span class="s">"#ddf3c2"</span>
        <span class="na">app:layout_constraintBottom_toTopOf=</span><span class="s">"@+id/activity_main__wv_2"</span>
        <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">"parent"</span>
        <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">"parent"</span>
        <span class="na">app:layout_constraintTop_toTopOf=</span><span class="s">"parent"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;ru.ok.technopolis.customview.WaveView</span>
        <span class="na">android:id=</span><span class="s">"@+id/activity_main__wv_2"</span>
        <span class="na">android:layout_width=</span><span class="s">"300dp"</span>
        <span class="na">android:layout_height=</span><span class="s">"100dp"</span>
        <span class="na">android:background=</span><span class="s">"#ddf3c2"</span>
        <span class="na">app:layout_constraintBottom_toTopOf=</span><span class="s">"@+id/activity_main__wv_3"</span>
        <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">"parent"</span>
        <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">"parent"</span>
        <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">"@+id/activity_main__wv_1"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;ru.ok.technopolis.customview.WaveView</span>
        <span class="na">android:id=</span><span class="s">"@+id/activity_main__wv_3"</span>
        <span class="na">android:layout_width=</span><span class="s">"200dp"</span>
        <span class="na">android:layout_height=</span><span class="s">"50dp"</span>
        <span class="na">android:background=</span><span class="s">"#ddf3c2"</span>
        <span class="na">app:layout_constraintBottom_toBottomOf=</span><span class="s">"parent"</span>
        <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">"parent"</span>
        <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">"parent"</span>
        <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">"@+id/activity_main__wv_2"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/android.support.constraint.ConstraintLayout&gt;</span>
</code></pre></div></div>

<p><img src="img/wave_size.png" width="400px" /></p>

<h2 id="доработки">Доработки</h2>

<p>Для того что бы можно было удобно пользоваться созданной <code class="highlighter-rouge">View</code> нужно доработать следующие моменты:</p>

<p>1) наличие падингов;
2) возможность изменения толщины линии;
3) возможность изменения цвета линии.</p>

<p><img src="img/wave_final.png" width="400px" /></p>

<p>Код примера можно посмотреть <a href="https://github.com/otopba/polis-mail-ru-customview-sample">тут</a></p>

<h2 id="что-почитать">Что почитать</h2>

<p><a href="../051_custom_view/">Предыдущий урок</a></p>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
    
  </body>
</html>
